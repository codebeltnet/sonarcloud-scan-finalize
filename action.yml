name: Finalyze with SonarCloud
description: An opinionated action that cleans the MSBuild/dotnet build hooks, collects the analysis data generated by the build, the test results, the code coverage and then uploads everything to SonarCloud.
inputs:
  token:
    description: The SonarCloud generated token.
    required: true
runs:
  using: composite
  steps:
    - name: SonarScanner for .NET
      run: >-
        dotnet sonarscanner end
        -d:sonar.token="${{ inputs.token }}"
      env:
        GITHUB_TOKEN: ${{ github.token }}
        SONAR_TOKEN: ${{ inputs.token }}
      shell: bash
